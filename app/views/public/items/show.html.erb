<div class="container">
  <div class="row mt-5 row-cols-3">
    <%= render 'public/homes/genres_search', genres: @genres %>
      <div class="col-4">
        <%= attachment_image_tag @item, :image, :fill, 00, 200, format: 'jpeg'%>
      </div>
      <div class="col-4">
        <h2><%= @item.name %></h2>
        <p><%= @item.introduction %></p>
        <p>¥<%= @item.taxin_price.to_s(:delimited) %>(税込)</p>
        <div>
          <% if customer_signed_in? %>
            <% unless current_customer.cart_items.exists?(item_id: @item) %>
              <%= form_with model: @cart_item, url:cart_items_path, local: true do |f| %>
                <%= f.select :quantity, (1..10), prompt: "個数選択" %>
                <%= f.hidden_field :item_id, :value => @item.id %>
                <%= f.submit "カートに入れる", class: "btn btn-success" %>
              <% end %>
            <% else %>
            <%= link_to "カートから出す", cart_item_path(CartItem.find_by(customer_id: current_customer.id, item_id: @item)), method: :delete, class: "btn btn-danger " %>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
